<%- include('partials/_header') %>
<main>
  <div class="container mt-5">
    <!-- Book Library Section -->
    <div class="row">
      <div class="col-md-12 text-center">
        <h1 class="text-primary">My Book Library</h1>
        <p class="lead">
          Total Books: <strong><%= books.length %></strong>
        </p>
      </div>
    </div>

    <!-- Book List Section -->
    <div class="row mt-5">
      <div class="col-md-8">
        <h2 class="text-primary">Books in Library</h2>
        <% if (books.length > 0) { %>
          <ul class="list-group">
            <% books.forEach(book => { %>
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <span>
                  <% if (book.image) { %>
                    <img src="/images/<%= book.image %>" alt="<%= book.title %>" class="book-image">
                  <% } %>
                  <strong><%= book.title %></strong> by <%= book.author %> (Published: <%= book.publishedDate %>)
                </span>
                <a href="/books/delete/<%= book._id %>" class="btn btn-danger btn-sm">
                  <i class="fas fa-trash-alt"></i> Delete
                </a>
              </li>
            <% }) %>
          </ul>
        <% } else { %>
          <p class="text-muted">No books found in your library.</p>
        <% } %>
      </div>

      <!-- Add Book Section -->
      <div class="col-md-4">
        <h2 class="text-primary">Add a New Book</h2>
        <form action="/books/add" method="POST">
          <div class="mb-3">
            <label for="title" class="form-label">Title</label>
            <input type="text" class="form-control" id="title" name="title" required>
          </div>
          <div class="mb-3">
            <label for="author" class="form-label">Author</label>
            <input type="text" class="form-control" id="author" name="author" required>
          </div>
          <div class="mb-3">
            <label for="publishedDate" class="form-label">Published Date</label>
            <input type="date" class="form-control" id="publishedDate" name="publishedDate" required>
          </div>
          <button type="submit" class="btn btn-primary">Add Book</button>
        </form>
      </div>
    </div>
  </div>
</main>
<%- include('partials/_footer') %>